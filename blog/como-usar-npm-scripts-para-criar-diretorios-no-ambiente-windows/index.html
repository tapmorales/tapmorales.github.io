<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="UTF-8">
	<title>Como usar npm-scripts para criar diretórios no ambiente windows</title>
	<link rel="stylesheet" href="/css/normalize.css">
	<link rel="stylesheet" href="/css/estilos2.css">

	<meta name="viewport" content="width=device-width, initial-scale=1">


	
	<meta name='robots' content='index, follow'>

		
	<link href='http://fonts.googleapis.com/css?family=Roboto+Slab:400,300,700' rel='stylesheet' type='text/css'>

	<meta name="description" content="Meu objetivo é mostrar como é possível criar diretórios a partir do npm-scripts no ambiente Windows">

	<meta property="og:title" content="Como usar npm-scripts para criar diretórios no ambiente windows"> 
	<meta property="og:description" content="Meu objetivo é mostrar como é possível criar diretórios a partir do npm-scripts no ambiente Windows"> 
	<meta property="og:url" content="http://serfrontend.com/blog/como-usar-npm-scripts-para-criar-diretorios-no-ambiente-windows/"> 
	<meta property="og:image" content="http://serfrontend.com/imagens/capa.jpg"> 
	<meta property="og:site_name" content="SerFrontend"> 
	<meta property="og:type" content="article"> 
	<meta property="og:locale" content="pt_br"/> 

	<link rel='canonical' href='http://serfrontend.com/blog/como-usar-npm-scripts-para-criar-diretorios-no-ambiente-windows/'>


	<!-- Social: Twitter -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@tapmorales">
    <meta name="twitter:creator" content="@tapmorales">
    <meta name="twitter:title" content="Como usar npm-scripts para criar diretórios no ambiente windows">
    <meta name="twitter:description" content="Meu objetivo é mostrar como é possível criar diretórios a partir do npm-scripts no ambiente Windows">
    
    <meta property="twitter:image:src" content="http://serfrontend.com/imagens/capa.jpg">
    

    
    <meta itemprop="name" content="Como usar npm-scripts para criar diretórios no ambiente windows"/>
    <meta itemprop="description" content="Meu objetivo é mostrar como é possível criar diretórios a partir do npm-scripts no ambiente Windows">
    <meta itemprop="image" content="http://serfrontend.com/imagens/capa.jpg"/>

    <script type="application/ld+json">
{
  "@context": "http://schema.org/",
  "@type": "NewsArticle",
  "headline": "Como usar npm-scripts para criar diretórios no ambiente windows",
  "datePublished": "2017-09-03",
  "description": "Meu objetivo é mostrar como é possível criar diretórios a partir do npm-scripts no ambiente Windows",
  "image": {
    "@type": "ImageObject",
    "height": "",
    "width": "",
    "url": ""
  },
  "author": "Daniel Tapias Morales",
  "publisher": {
    "@type": "Organization",
    "logo": {
      "@type": "ImageObject",
      "url": ""
    },
    "name": "Daniel Tapias Morales"
  }
}
</script>


</head>
<body itemscope itemtype="http://schema.org/BlogPosting">
	
	<header id="topo">
	<div class="container topo__container">
		
		<div class="topo__logo"><a href="/blog/">
			<img class="topo__logo__img" src="/imagens/logo_ser-frontend.svg" alt="Logotipo Ser frontend"></a>
		</div>
		
		<!-- <nav class="topo__mainMenu">
			<ul>
				<li><a href="index.php#sobre-o-curso">Sobre o curso</a></li>
				<li><a href="index.php#o-que-sera-aprendido">Conteúdo</a></li>
				<li><a href="index.php#contato">Contato</a></li>
				<li><a href="https://www.udemy.com/ferramentas-front-end-git-npm-script-gulp-e-sass/" target="_blank" class="adquira" onclick="ga('send', 'event', 'menu', 'click', 'Curso workflow frontend')">Adquira Já</a></li>

				<a  class="investimento__cta" >Adquira Já</a>
			</ul>
		</nav> -->

		<nav class="topo__mainMenu">
			<ul>
				<li><a href="/blog/">Blog</a></li>
				<li><a href="/cursos/">Cursos</a></li>
				
			</ul>
		</nav>
	</div>
</header>

<div id="navMob">
	<a href="#">
		<img src="/imagens/icos/menu.svg" alt="">
	</a>
</div>
	



	<section class="bannerDestaque" style="background: #086280">
		<div class="container">
			<h1 class="bannerDestaque__titulo" itemprop="name">
				Como usar npm-scripts para criar diretórios no ambiente windows

			</h1>

			<p class="bannerDestaque__text" itemprop="description">
				Meu objetivo é mostrar como é possível criar diretórios a partir do npm-scripts no ambiente Windows.

			</p>
			<time itemprop="datePublished" datetime="2017-09-27" class="bannerDestaque__time"> 27/09/2017</time>
		
			&#x1F913
			<span itemscope itemtype="http://schema.org/Person" class="bannerDestaque__time">
				<a itemprop="name" href="https://twitter.com/tapmorales">Daniel Tapias Morales</a>
			</span>
		</div>
	</section>

	<main>

	

	<article class="content-post" itemprop="articleBody">
		<div class="container">
			
		<p>
			Esse post nem é um post de verdade, mas sim uma dica rápida.
Meu objetivo é mostrar como é possível criar diretórios a partir do npm-scripts no ambiente Windows.
</p>

<h2>Por que este post foi escrito?
</h2>

<p>Na primeira versão do <a href="https://www.udemy.com/ferramentas-front-end-git-npm-script-gulp-e-sass/?couponCode=PROMOSITE20" title="Torne-se um desenvolvedor front-end">projeto construído para este curso</a> eu utilizei o <a href="https://bower.io/" target="_blank">bower</a> como gerenciador de dependência do lado do front-end. Contudo, após finalizar a gravação de todas as aulas, resolvi voltar alguns commits anteriores e criei uma nova branch para regravar algumas aulas, substituindo o bower pelo npm.</p>
<p>

Para que as demais video-aulas continuassem a fazer sentido, criei um npm-script para copiar as dependências de node_modules para dentro de components. Fazendo isso, não precisaria regravar todas as aulas, pois a estrutura de pastas seria a mesma. Assim quem fosse assistir na sequência não se sentiria perdido.</p>
<p>

No final, este foi o npm-script criado:
 
<pre><code>"scripts": {
    "postinstall": "cp -r node_modules/bootstrap/dist src/components/bootstrap/ &amp;&amp; cp -r node_modules/font-awesome/css src/components/font-awesome/ &amp;&amp; cp -r node_modules/font-awesome/fonts src/components/font-awesome/",
    "gulp": "gulp"
  },</code></pre>

</p>


<p>Tudo funcionou perfeitamente pois eu já tinha em meu projeto a estrutura de pastas criadas previamente e não me atentei ao detalhe de que, se essa estrutura de pasta não existisse, tudo falharia.
</p>

<h2>É só criar a estrutura de pasta usando mkdir -p</h2>

<p>Pois é. Deveria funcionar. Mas não é assim que acontece no Windows. </p>

<p>
Se voce digitar no seu terminal algo:
			
<pre><code>$ mkdir -p meu/caminho/que/nao/existe</code></pre>
</p>

<p>Você verá que todo o path foi criado justamente por causa da flag -p.</p>

<p>Mas se você tentar fazer o mesmo no npm-script e rodar o comando, verá um erro. 
</p>

<h2>E como resolver.
</h2>

<p>Para resolver essa questão utilizei um módulo do node chamado mkdirp. Este módulo permite criarmos diretórios se for necessário. Sua utilização é muito fácil. Primeiro, vamos instalar o módulo e registrá-lo como dependência em nosso package.json.

<pre><code>$ npm i mkdirp -D</code></pre>
</p>

<p>Depois, basta eu acrescentar um script para criar os diretórios necessários antes de tentar copiar os arquivos da pasta node_modules, Assim:

<pre><code>"preinstall": "mkdirp src/components/bootstrap/ src/components/font-awesome/",</code></pre>
</p>

<p>

Segue o código inteiro para sua referência:

<pre><code>"scripts": {
    "test": "echo \"Error: no test specified\" &amo;&amo; exit 1",
    "start": "echo startando",
    "prestart": "echo prestart",
    "poststart": "echo post start",
    "preinstall": "mkdirp src/components/bootstrap/ src/components/font-awesome/",
    "postinstall": "cp -r node_modules/bootstrap/dist src/components/bootstrap/ &amo;&amo; cp -r node_modules/font-awesome/css src/components/font-awesome/ &amo;&amo; cp -r node_modules/font-awesome/fonts src/components/font-awesome/",
    "gulp": "gulp"
  }</code></pre>
</p>

<p>Moleza, não !</p>

<p>
Forte abraço e até a próxima
</p>

<div class="container">
				<div id="disqus_thread"></div>
	
</div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

var disqus_config = function () {
this.page.url = 'http://serfrontend.com/blog/como-usar-npm-scripts-para-criar-diretorios-no-ambiente-windows/';  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = 'como-usar-npm-scripts-para-criar-diretorios-no-ambiente-windows'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://serfrontend.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

		</div>
	</article>

	

	

	
	</main>

	

	

	<footer class="footer">
		<div class="container">
			<img class="footer__logo" src="/imagens/logo_ser-frontend.svg" alt="Logotipo serfrontend">
			
		</div>
	</footer>
	<link rel="stylesheet" href="/vendor/highlight/styles/monokai-sublime.css">
	<script src="/vendor/highlight/highlight.pack.js"></script>
	<script>
		hljs.initHighlightingOnLoad();
	</script>

    

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-73075491-3', 'auto');
  ga('send', 'pageview');
  </script>

<script id="dsq-count-scr" src="//serfrontend.disqus.com/count.js" async></script>
</body>
</html>